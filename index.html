<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>武将一覧</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>武将一覧</h1>

<input
  type="text"
  id="search"
  placeholder="武将名で検索"
  style="width:100%; padding:10px; font-size:16px; margin-bottom:12px;"
>


<ul id="list"></ul>

<script>
let data = [];

fetch('data/busho.csv?ver=' + Date.now())
  .then(res => res.text())
  .then(text => {
    const rows = text.trim().split('\n').slice(1);
    data = rows.map(row => {
      const [id, name, power] = row.split(',');
      return { id, name, power };
    });
    render(data);
  });

function render(listData) {
  const list = document.getElementById('list');
  list.innerHTML = '';

  listData.forEach(item => {
    const li = document.createElement('li');
    li.textContent = `${item.name}（武力 ${item.power}）`;
    list.appendChild(li);
  });
}

document.getElementById('search').addEventListener('input', e => {
  const keyword = e.target.value;
  const filtered = data.filter(item =>
    item.name.includes(keyword)
  );
  render(filtered);
});
</script>

</body>
</html>
